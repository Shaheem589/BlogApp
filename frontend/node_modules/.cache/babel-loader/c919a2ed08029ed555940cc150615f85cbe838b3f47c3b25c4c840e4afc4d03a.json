{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/shahe/OneDrive/Documents/GitHub/BlogApp/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3;import React,{useState,useEffect}from'react';import{Box,styled,TextareaAutosize,Button,FormControl,InputBase}from'@mui/material';import{AddCircle as Add}from'@mui/icons-material';import{useNavigate,useParams}from'react-router-dom';import{API}from'../../service/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled(Box)(_ref=>{let{theme}=_ref;return{margin:'50px 100px',[theme.breakpoints.down('md')]:{margin:0}};});const Image=styled('img')({width:'100%',height:'50vh',objectFit:'cover'});const StyledFormControl=styled(FormControl)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    margin-top: 10px;\\n    display: flex;\\n    flex-direction: row;\\n\"])));const InputTextField=styled(InputBase)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    flex: 1;\\n    margin: 0 30px;\\n    font-size: 25px;\\n\"])));const StyledTextArea=styled(TextareaAutosize)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    width: 100%;\\n    border: none;\\n    margin-top: 50px;\\n    font-size: 18px;\\n    &:focus-visible {\\n        outline: none;\\n    }\\n\"])));const initialPost={title:'',description:'',picture:'',username:'codeforinterview',categories:'Tech',createdDate:new Date()};const Update=()=>{const navigate=useNavigate();const[post,setPost]=useState(initialPost);const[file,setFile]=useState('');const[imageURL,setImageURL]=useState('');const{id}=useParams();const url='https://images.unsplash.com/photo-1543128639-4cb7e6eeef1b?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8bGFwdG9wJTIwc2V0dXB8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80';useEffect(()=>{const fetchData=async()=>{try{let response=await API.getPostById(id);if(response.isSuccess){setPost(response.data);}else{console.error('API call was successful, but response indicates an error:',response);}}catch(error){console.error('Error fetching data:',error);}};fetchData();},[]);useEffect(()=>{const getImage=async()=>{try{if(file){const data=new FormData();data.append(\"name\",file.name);data.append(\"file\",file);const response=await API.uploadFile(data);if(response.isSuccess){post.picture=response.data;setImageURL(response.data);}else{console.error('File upload was successful, but response indicates an error:',response);}}}catch(error){console.error('Error uploading file:',error);}};// Call the getImage function\ngetImage();},[file]);const updateBlogPost=async()=>{await API.updatePost(post);navigate(\"/details/\".concat(id));};const handleChange=e=>{setPost({...post,[e.target.name]:e.target.value});};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Image,{src:post.picture||url,alt:\"post\"}),/*#__PURE__*/_jsxs(StyledFormControl,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(Add,{fontSize:\"large\",color:\"action\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:\"none\"},onChange:e=>setFile(e.target.files[0])}),/*#__PURE__*/_jsx(InputTextField,{onChange:e=>handleChange(e),value:post.title,name:\"title\",placeholder:\"Title\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>updateBlogPost(),variant:\"contained\",color:\"primary\",children:\"Update\"})]}),/*#__PURE__*/_jsx(StyledTextArea,{rowsMin:5,placeholder:\"Tell your story...\",name:\"description\",onChange:e=>handleChange(e),value:post.description})]});};export default Update;","map":{"version":3,"names":["React","useState","useEffect","Box","styled","TextareaAutosize","Button","FormControl","InputBase","AddCircle","Add","useNavigate","useParams","API","jsx","_jsx","jsxs","_jsxs","Container","_ref","theme","margin","breakpoints","down","Image","width","height","objectFit","StyledFormControl","_templateObject","_taggedTemplateLiteral","InputTextField","_templateObject2","StyledTextArea","_templateObject3","initialPost","title","description","picture","username","categories","createdDate","Date","Update","navigate","post","setPost","file","setFile","imageURL","setImageURL","id","url","fetchData","response","getPostById","isSuccess","data","console","error","getImage","FormData","append","name","uploadFile","updateBlogPost","updatePost","concat","handleChange","e","target","value","children","src","alt","htmlFor","fontSize","color","type","style","display","onChange","files","placeholder","onClick","variant","rowsMin"],"sources":["C:/Users/shahe/OneDrive/Documents/GitHub/BlogApp/frontend/src/components/create/Update.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport { Box, styled, TextareaAutosize, Button, FormControl, InputBase } from '@mui/material';\r\nimport { AddCircle as Add } from '@mui/icons-material';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\n\r\nimport { API } from '../../service/api';\r\n\r\nconst Container = styled(Box)(({ theme }) => ({\r\n    margin: '50px 100px',\r\n    [theme.breakpoints.down('md')]: {\r\n        margin: 0\r\n    }\r\n}));\r\n\r\nconst Image = styled('img')({\r\n    width: '100%',\r\n    height: '50vh',\r\n    objectFit: 'cover'\r\n});\r\n\r\nconst StyledFormControl = styled(FormControl)`\r\n    margin-top: 10px;\r\n    display: flex;\r\n    flex-direction: row;\r\n`;\r\n\r\nconst InputTextField = styled(InputBase)`\r\n    flex: 1;\r\n    margin: 0 30px;\r\n    font-size: 25px;\r\n`;\r\n\r\nconst StyledTextArea = styled(TextareaAutosize)`\r\n    width: 100%;\r\n    border: none;\r\n    margin-top: 50px;\r\n    font-size: 18px;\r\n    &:focus-visible {\r\n        outline: none;\r\n    }\r\n`;\r\n\r\nconst initialPost = {\r\n    title: '',\r\n    description: '',\r\n    picture: '',\r\n    username: 'codeforinterview',\r\n    categories: 'Tech',\r\n    createdDate: new Date()\r\n}\r\n\r\nconst Update = () => {\r\n    const navigate = useNavigate();\r\n\r\n    const [post, setPost] = useState(initialPost);\r\n    const [file, setFile] = useState('');\r\n    const [imageURL, setImageURL] = useState('');\r\n\r\n    const { id } = useParams();\r\n\r\n    const url = 'https://images.unsplash.com/photo-1543128639-4cb7e6eeef1b?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8bGFwdG9wJTIwc2V0dXB8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80';\r\n    \r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                let response = await API.getPostById(id);\r\n                if (response.isSuccess) {\r\n                    setPost(response.data);\r\n                } else {\r\n                    console.error('API call was successful, but response indicates an error:', response);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching data:', error);\r\n            }\r\n        };\r\n        fetchData();\r\n    }, []);\r\n\r\n    useEffect(() => {const getImage = async () => {\r\n        try {\r\n            if (file) {\r\n                const data = new FormData();\r\n                data.append(\"name\", file.name);\r\n                data.append(\"file\", file);\r\n                const response = await API.uploadFile(data);\r\n                if (response.isSuccess) {\r\n                    post.picture = response.data;\r\n                    setImageURL(response.data);\r\n                } else {\r\n                    console.error('File upload was successful, but response indicates an error:', response);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error uploading file:', error);\r\n        }\r\n    };\r\n    \r\n    // Call the getImage function\r\n    getImage();    \r\n    }, [file])\r\n\r\n    const updateBlogPost = async () => {\r\n        await API.updatePost(post);\r\n        navigate(`/details/${id}`);\r\n    }\r\n\r\n    const handleChange = (e) => {\r\n        setPost({ ...post, [e.target.name]: e.target.value });\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <Image src={post.picture || url} alt=\"post\" />\r\n\r\n            <StyledFormControl>\r\n                <label htmlFor=\"fileInput\">\r\n                    <Add fontSize=\"large\" color=\"action\" />\r\n                </label>\r\n                <input\r\n                    type=\"file\"\r\n                    id=\"fileInput\"\r\n                    style={{ display: \"none\" }}\r\n                    onChange={(e) => setFile(e.target.files[0])}\r\n                />\r\n                <InputTextField onChange={(e) => handleChange(e)} value={post.title} name='title' placeholder=\"Title\" />\r\n                <Button onClick={() => updateBlogPost()} variant=\"contained\" color=\"primary\">Update</Button>\r\n            </StyledFormControl>\r\n\r\n            <StyledTextArea\r\n                rowsMin={5}\r\n                placeholder=\"Tell your story...\"\r\n                name='description'\r\n                onChange={(e) => handleChange(e)} \r\n                value={post.description}\r\n            />\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Update;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}