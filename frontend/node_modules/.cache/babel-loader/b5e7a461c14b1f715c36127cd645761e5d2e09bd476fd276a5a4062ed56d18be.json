{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/shahe/OneDrive/Documents/GitHub/BlogApp/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import{Box,Button,TextareaAutosize,styled}from\"@mui/material\";import{useState,useContext,useEffect}from\"react\";import{DataContext}from\"../../../context/DataProvider\";import{API}from\"../../../service/api\";import Comment from\"./Comment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled(Box)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    margin-top: 100px;\\n    display: flex;\\n\"])));const Image=styled('img')({width:50,height:50,borderRadius:'50%'});const StyledTextArea=styled(TextareaAutosize)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    height: 100px !important;\\n    width: 100%; \\n    margin: 0 20px;\\n\"])));const initialValue={name:'',postId:'',date:new Date(),comments:''};export const Comments=_ref=>{let{post}=_ref;const url='https://static.thenounproject.com/png/12017-200.png';const{account}=useContext(DataContext);const[comment,setComment]=useState(initialValue);const[comments,setComments]=useState([]);const[toggle,setToggle]=useState(false);useEffect(()=>{const getData=async()=>{try{let response=await API.getAllComments(post._id);if(response.isSuccess){setComments(response.data);}}catch(err){console.error(\"Error fetching data:\",err);}};getData();},[post,toggle]);const handleChange=e=>{setComment({...comment,name:account.username,postId:post._id,comments:e.target.value});};const addComment=async e=>{let response=await API.newComment(comment);if(response.isSuccess){setComment(initialValue);}setToggle(prev=>!prev);};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Image,{src:url,alt:\"DP\"}),/*#__PURE__*/_jsx(StyledTextArea,{minRows:5,placeholder:\"Share your thoughts...\",value:comment.comments,onChange:e=>handleChange(e)}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"medium\",style:{height:40},onClick:e=>addComment(e),children:\"Post\"})]}),/*#__PURE__*/_jsx(Box,{children:comments&&comments.length>0&&comments.map(comment=>/*#__PURE__*/_jsx(Comment,{comment:comment,setToggle:setToggle}))})]});};export default Comments;","map":{"version":3,"names":["Box","Button","TextareaAutosize","styled","useState","useContext","useEffect","DataContext","API","Comment","jsx","_jsx","jsxs","_jsxs","Container","_templateObject","_taggedTemplateLiteral","Image","width","height","borderRadius","StyledTextArea","_templateObject2","initialValue","name","postId","date","Date","comments","Comments","_ref","post","url","account","comment","setComment","setComments","toggle","setToggle","getData","response","getAllComments","_id","isSuccess","data","err","console","error","handleChange","e","username","target","value","addComment","newComment","prev","children","src","alt","minRows","placeholder","onChange","variant","size","style","onClick","length","map"],"sources":["C:/Users/shahe/OneDrive/Documents/GitHub/BlogApp/frontend/src/components/details/comments/Comments.jsx"],"sourcesContent":["import { Box,Button,TextareaAutosize,styled } from \"@mui/material\";\r\nimport { useState,useContext,useEffect } from \"react\";\r\nimport { DataContext } from \"../../../context/DataProvider\";\r\nimport { API } from \"../../../service/api\";\r\nimport Comment from \"./Comment\";\r\nconst Container = styled(Box)`\r\n    margin-top: 100px;\r\n    display: flex;\r\n`;\r\n\r\nconst Image = styled('img')({\r\n    width: 50,\r\n    height: 50,\r\n    borderRadius: '50%'\r\n});\r\n\r\nconst StyledTextArea = styled(TextareaAutosize)`\r\n    height: 100px !important;\r\n    width: 100%; \r\n    margin: 0 20px;\r\n`;\r\n\r\nconst initialValue = {\r\n    name: '',\r\n    postId: '',\r\n    date: new Date(),\r\n    comments: ''\r\n}\r\nexport const Comments=({post})=>{\r\n    const url = 'https://static.thenounproject.com/png/12017-200.png';\r\n    const {account}=useContext(DataContext);\r\n    const [comment, setComment] = useState(initialValue);\r\n    const [comments, setComments] = useState([]);\r\n    const [toggle,setToggle]=useState(false);\r\n    useEffect(() => {\r\n        const getData = async () => {\r\n            try {\r\n                let response = await API.getAllComments(post._id);\r\n                if (response.isSuccess) {\r\n                    setComments(response.data);\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Error fetching data:\", err);\r\n            }\r\n        };\r\n        getData();\r\n    }, [post,toggle]);\r\n    const handleChange = (e) => {\r\n        setComment({\r\n            ...comment,\r\n            name: account.username,\r\n            postId: post._id,\r\n            comments: e.target.value\r\n        });\r\n    }\r\n    const addComment = async(e) => {\r\n        let response=await API.newComment(comment);\r\n        if(response.isSuccess){\r\n            setComment(initialValue);\r\n        }\r\n        setToggle(prev=> !prev)\r\n    }\r\n    return (\r\n        <Box>\r\n            <Container>\r\n                <Image src={url} alt=\"DP\"/>\r\n                <StyledTextArea\r\n                    minRows={5}\r\n                    placeholder=\"Share your thoughts...\"\r\n                    value={comment.comments}\r\n                    onChange={(e)=>handleChange(e)}\r\n                />\r\n                <Button \r\n                    variant=\"contained\" \r\n                    size=\"medium\" \r\n                    style={{height:40}}\r\n                    onClick={(e)=>addComment(e)}>Post</Button>\r\n            </Container>\r\n            <Box> \r\n                {\r\n                    comments && comments.length>0 && comments.map(comment => (\r\n                        <Comment comment={comment} setToggle={setToggle}/>\r\n                    ))\r\n                }\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\nexport default Comments; "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}