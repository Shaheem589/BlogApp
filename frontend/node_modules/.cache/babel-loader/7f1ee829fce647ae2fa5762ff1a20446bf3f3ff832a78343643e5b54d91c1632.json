{"ast":null,"code":"import axios from 'axios';\nimport { API_NOTIFICATION_MESSAGES, SERVICE_URLS } from '../constants/config.js';\nimport { getAccessToken, getType } from '../utils/common-utils.js';\nconst API_URL = 'http://localhost:8000';\nconst axiosInstance = axios.create({\n  baseURL: API_URL,\n  timeout: 30000,\n  headers: {\n    \"Accept\": \"application/json, form-data\",\n    \"Content-Type\": \"application/json\"\n  }\n});\naxiosInstance.interceptors.request.use(function (config) {\n  if (config.TYPE.params) {\n    config.params = config.TYPE.params;\n  } else if (config.TYPE.query) {\n    config.url = config.url + '/' + config.TYPE.query;\n  }\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\naxiosInstance.interceptors.response.use(function (response) {\n  return processResponse(response);\n}, function (error) {\n  return Promise.reject(processError(error));\n});\nconst processResponse = response => {\n  if ((response === null || response === void 0 ? void 0 : response.status) === 200) {\n    return {\n      isSuccess: true,\n      data: response.data\n    };\n  } else {\n    return {\n      isFailure: true,\n      status: response === null || response === void 0 ? void 0 : response.status,\n      msg: response === null || response === void 0 ? void 0 : response.msg,\n      code: response === null || response === void 0 ? void 0 : response.code\n    };\n  }\n};\nconst processError = error => {\n  if (error.response) {\n    console.log('ERROR IN RESPONSE:', error.toJSON());\n    return {\n      isError: true,\n      msg: API_NOTIFICATION_MESSAGES.responseFailure,\n      code: error.response.status\n    };\n  } else if (error.request) {\n    console.log('ERROR IN REQUEST:', error.toJSON());\n    return {\n      isError: true,\n      msg: API_NOTIFICATION_MESSAGES.requestFailure,\n      code: \"\"\n    };\n  } else {\n    console.log('ERROR IN NETWORK:', error.toJSON());\n    return {\n      isError: true,\n      msg: API_NOTIFICATION_MESSAGES.networkError,\n      code: \"\"\n    };\n  }\n};\nconst API = {};\nfor (const [key, value] of Object.entries(SERVICE_URLS)) {\n  API[key] = (body, showUploadProgress, showDownloadProgress) => axiosInstance({\n    method: value.method,\n    url: value.url,\n    data: value.method === 'DELETE' ? {} : body,\n    responseType: value.responseType,\n    headers: {\n      authorization: getAccessToken()\n    },\n    TYPE: getType(value, body),\n    onUploadProgress: function (progressEvent) {\n      if (showUploadProgress) {\n        let percentageCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n        showUploadProgress(percentageCompleted);\n      }\n    },\n    onDownloadProgress: function (progressEvent) {\n      if (showDownloadProgress) {\n        let percentageCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n        showDownloadProgress(percentageCompleted);\n      }\n    }\n  });\n}\nexport { API };","map":{"version":3,"names":["axios","API_NOTIFICATION_MESSAGES","SERVICE_URLS","getAccessToken","getType","API_URL","axiosInstance","create","baseURL","timeout","headers","interceptors","request","use","config","TYPE","params","query","url","error","Promise","reject","response","processResponse","processError","status","isSuccess","data","isFailure","msg","code","console","log","toJSON","isError","responseFailure","requestFailure","networkError","API","key","value","Object","entries","body","showUploadProgress","showDownloadProgress","method","responseType","authorization","onUploadProgress","progressEvent","percentageCompleted","Math","round","loaded","total","onDownloadProgress"],"sources":["E:/Final year project/WebP/Blog-Website/client/src/service/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport { API_NOTIFICATION_MESSAGES ,SERVICE_URLS} from '../constants/config.js';\r\nimport { getAccessToken,getType } from '../utils/common-utils.js';\r\nconst API_URL='http://localhost:8000';\r\nconst axiosInstance=axios.create({\r\n    baseURL:API_URL,\r\n    timeout:30000,\r\n    headers:{\r\n        \"Accept\": \"application/json, form-data\", \r\n        \"Content-Type\": \"application/json\"\r\n    }\r\n})\r\naxiosInstance.interceptors.request.use(\r\n    function(config){\r\n        if(config.TYPE.params){\r\n            config.params = config.TYPE.params;\r\n        }\r\n        else if(config.TYPE.query){\r\n            config.url=config.url+'/'+config.TYPE.query;\r\n        }\r\n        return config;\r\n    },\r\n    function (error){\r\n        return Promise.reject(error);\r\n    }\r\n)\r\naxiosInstance.interceptors.response.use(\r\n    function(response){\r\n        return processResponse(response);\r\n    },\r\n    function(error){\r\n        return Promise.reject(processError(error));\r\n    }\r\n)\r\nconst processResponse=(response)=>{\r\n    if(response?.status === 200){\r\n        return { isSuccess: true, data: response.data}\r\n    } \r\n    else\r\n    {   return{\r\n            isFailure:true,\r\n            status:response?.status,\r\n            msg:response?.msg,\r\n            code:response?.code\r\n        }\r\n    }\r\n}\r\nconst processError=(error)=>{\r\n    if(error.response){\r\n        console.log('ERROR IN RESPONSE:',error.toJSON());\r\n        return {\r\n            isError:true,\r\n            msg:API_NOTIFICATION_MESSAGES.responseFailure,\r\n            code:error.response.status\r\n        }\r\n    }\r\n    else if(error.request){\r\n        console.log('ERROR IN REQUEST:',error.toJSON());\r\n        return {\r\n            isError:true,\r\n            msg:API_NOTIFICATION_MESSAGES.requestFailure,\r\n            code:\"\"\r\n        }\r\n    }\r\n    else{\r\n        console.log('ERROR IN NETWORK:',error.toJSON());\r\n        return {\r\n            isError:true,\r\n            msg:API_NOTIFICATION_MESSAGES.networkError,\r\n            code:\"\"\r\n        }\r\n    }\r\n}\r\nconst API={};\r\nfor (const [key,value] of Object.entries(SERVICE_URLS)){\r\n    API[key]=(body,showUploadProgress,showDownloadProgress)=>\r\n        axiosInstance({\r\n            method: value.method,\r\n            url: value.url,\r\n            data: value.method === 'DELETE' ? {}: body,\r\n            responseType:value.responseType,\r\n            headers:{\r\n                authorization:getAccessToken()\r\n            },\r\n            TYPE: getType(value,body),\r\n            onUploadProgress: function(progressEvent){\r\n                if(showUploadProgress){\r\n                    let percentageCompleted = Math.round((progressEvent.loaded*100)/progressEvent.total)\r\n                    showUploadProgress(percentageCompleted);\r\n                }\r\n            },\r\n            onDownloadProgress: function(progressEvent){\r\n                if(showDownloadProgress){\r\n                    let percentageCompleted = Math.round((progressEvent.loaded*100)/progressEvent.total)\r\n                    showDownloadProgress(percentageCompleted);\r\n                }\r\n            }\r\n        })\r\n}\r\nexport { API };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}