{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/shahe/OneDrive/Documents/GitHub/BlogApp/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3;import{Box,Button,FormControl,InputBase,styled,TextareaAutosize}from\"@mui/material\";import{AddCircle}from'@mui/icons-material';import{useState,useEffect,useContext}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import{DataContext}from\"../../context/DataProvider\";import{API}from\"../../service/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled(Box)(_ref=>{let{theme}=_ref;return{margin:'50px 100px',[theme.breakpoints.down('md')]:{margin:0}};});const Image=styled('img')({width:'100%',height:'50vh',objectFit:'cover'});const StyledFormControl=styled(FormControl)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    margin-top: 10px;\\n    display: flex;\\n    flex-direction: row;\\n\"])));const InputTextField=styled(InputBase)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    flex: 1;\\n    margin: 0 30px;\\n    font-size: 25px;\\n\"])));const Textarea=styled(TextareaAutosize)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    width: 100%;\\n    border: none;\\n    margin-top: 50px;\\n    font-size: 18px;\\n    &:focus-visible {\\n        outline: none;\\n    }\\n\"])));const initialPost={title:'',description:'',picture:'',username:'',categories:'',createdDate:new Date()};const CreatePost=()=>{const[post,setPost]=useState(initialPost);const[file,setFile]=useState('');const location=useLocation();const navigate=useNavigate();const{account}=useContext(DataContext);const url=post.picture?post.picture:'https://images.unsplash.com/photo-1543128639-4cb7e6eeef1b?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8bGFwdG9wJTIwc2V0dXB8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80';useEffect(()=>{var _location$search;const getImage=async()=>{if(file){const data=new FormData();data.append(\"name\",file.name);data.append(\"file\",file);let response=await API.uploadFile(data);post.picture=response.data;}};getImage();post.categories=((_location$search=location.search)===null||_location$search===void 0?void 0:_location$search.split('=')[1])||'All';post.username=account.username;},[file]);const savePost=async()=>{let response=await API.createPost(post);if(response.isSuccess){navigate('/');}};const handleChange=e=>{setPost({...post,[e.target.name]:e.target.value});};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Image,{src:url,alt:\"banner\"}),/*#__PURE__*/_jsxs(StyledFormControl,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(AddCircle,{fontSize:\"large\",color:\"action\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:'none'},onChange:e=>setFile(e.target.files[0])}),/*#__PURE__*/_jsx(InputTextField,{placeholder:\"Title\",onChange:e=>handleChange(e),name:\"title\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:()=>savePost(),children:\"Publish\"})]}),/*#__PURE__*/_jsx(Textarea,{minRows:5,placeholder:\"Tell your story\",onChange:e=>handleChange(e),name:\"description\"})]});};export default CreatePost;","map":{"version":3,"names":["Box","Button","FormControl","InputBase","styled","TextareaAutosize","AddCircle","useState","useEffect","useContext","useLocation","useNavigate","DataContext","API","jsx","_jsx","jsxs","_jsxs","Container","_ref","theme","margin","breakpoints","down","Image","width","height","objectFit","StyledFormControl","_templateObject","_taggedTemplateLiteral","InputTextField","_templateObject2","Textarea","_templateObject3","initialPost","title","description","picture","username","categories","createdDate","Date","CreatePost","post","setPost","file","setFile","location","navigate","account","url","_location$search","getImage","data","FormData","append","name","response","uploadFile","search","split","savePost","createPost","isSuccess","handleChange","e","target","value","children","src","alt","htmlFor","fontSize","color","type","id","style","display","onChange","files","placeholder","variant","onClick","minRows"],"sources":["C:/Users/shahe/OneDrive/Documents/GitHub/BlogApp/frontend/src/components/create/createPost.jsx"],"sourcesContent":["import { Box,Button,FormControl,InputBase,styled,TextareaAutosize } from \"@mui/material\";\r\nimport { AddCircle } from '@mui/icons-material';\r\nimport { useState,useEffect,useContext } from \"react\";\r\nimport { useLocation,useNavigate } from \"react-router-dom\";\r\nimport { DataContext } from \"../../context/DataProvider\";\r\nimport { API } from \"../../service/api\";\r\nconst Container = styled(Box)(({ theme }) => ({\r\n    margin: '50px 100px',\r\n    [theme.breakpoints.down('md')]: {\r\n        margin: 0\r\n    }\r\n}));\r\nconst Image = styled('img')({\r\n    width: '100%',\r\n    height: '50vh',\r\n    objectFit: 'cover'\r\n});\r\n\r\nconst StyledFormControl = styled(FormControl)`\r\n    margin-top: 10px;\r\n    display: flex;\r\n    flex-direction: row;\r\n`;\r\n\r\nconst InputTextField = styled(InputBase)`\r\n    flex: 1;\r\n    margin: 0 30px;\r\n    font-size: 25px;\r\n`;\r\n\r\nconst Textarea = styled(TextareaAutosize)`\r\n    width: 100%;\r\n    border: none;\r\n    margin-top: 50px;\r\n    font-size: 18px;\r\n    &:focus-visible {\r\n        outline: none;\r\n    }\r\n`;\r\nconst initialPost = {\r\n    title: '',\r\n    description: '',\r\n    picture: '',\r\n    username: '',\r\n    categories: '',\r\n    createdDate: new Date()\r\n}\r\nconst CreatePost=()=>{\r\n    const [post,setPost]=useState(initialPost);\r\n    const [file,setFile]=useState('');\r\n    const location=useLocation();\r\n    const navigate=useNavigate();\r\n    const { account }=useContext(DataContext);\r\n    const url = post.picture ? post.picture : 'https://images.unsplash.com/photo-1543128639-4cb7e6eeef1b?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8bGFwdG9wJTIwc2V0dXB8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80';\r\n    useEffect(()=>{\r\n\r\n        const getImage=async()=>{\r\n            if(file){\r\n                const data=new FormData();\r\n                data.append(\"name\",file.name);\r\n                data.append(\"file\",file);\r\n                let response=await API.uploadFile(data);\r\n                post.picture=response.data;\r\n            }\r\n\r\n        }\r\n        getImage();\r\n        post.categories=location.search?.split('=')[1] || 'All' ;\r\n        post.username=account.username;\r\n    },[file])\r\n    const savePost = async () => {\r\n        let response=await API.createPost(post);\r\n        if(response.isSuccess){\r\n            navigate('/');\r\n        }\r\n    }\r\n    const handleChange=(e)=>{\r\n        setPost({...post,[e.target.name]: e.target.value})\r\n    }\r\n    return(\r\n        <Container>\r\n            <Image src={url} alt=\"banner\" /> \r\n            <StyledFormControl>\r\n                <label htmlFor=\"fileInput\">\r\n                    <AddCircle fontSize=\"large\" color=\"action\"/>\r\n                </label>\r\n                <input type=\"file\"\r\n                    id=\"fileInput\"\r\n                    style={{ display:'none' }}\r\n                    onChange={(e)=>setFile(e.target.files[0])}\r\n                />\r\n                <InputTextField placeholder=\"Title\" onChange={(e) => handleChange(e)} name=\"title\"/>\r\n                <Button variant=\"contained\" onClick={()=>savePost()}>Publish</Button>\r\n            </StyledFormControl>\r\n            <Textarea\r\n                minRows={5}\r\n                placeholder=\"Tell your story\"\r\n                onChange={(e) => handleChange(e)}\r\n                name=\"description\"\r\n                />\r\n        </Container>\r\n        )\r\n}\r\nexport default CreatePost;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}